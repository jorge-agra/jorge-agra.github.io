define(['exports', 'preact/jsx-runtime', 'preact/hooks', 'preact/compat', './index-0f1e12db', './utils/PRIVATE_refUtils', './hooks/UNSAFE_useOutsideClick', './hooks/UNSAFE_useUser', './hooks/UNSAFE_useComponentTheme', './utils/UNSAFE_classNames', './utils-3096e431', './Common/themes/themeContract.css', './UNSAFE_Floating/themes/redwood/FloatingTheme', './classNames-c6cc4719', './UNSAFE_Floating/themes/FloatingStyles.css', './vanilla-extract-dynamic.esm-a9754e48', './UNSAFE_Floating/themes/FloatingContract.css'], (function(t,e,n,s,i,o,r,a,l,c,f,u,d,m,g,h,p){"use strict";const b=7,x=6,y=5,A=5,C=s.forwardRef((({data:t,anchorRef:s,tail:i,isRtl:r,backgroundColor:a},c)=>{const{styles:g,baseTheme:h}=l.useComponentTheme(d.FloatingRedwoodTheme),{baseStyle:p}=g,C=n.useRef(null),[S,w]=n.useState({arrowStyle:{visibility:"hidden"},arrowInnerStyle:{visibility:"hidden"}});n.useLayoutEffect((()=>{if(null==C.current)return;const{isCornerVerticalPlacement:e,isCornerHorizontalPlacement:n}=function(t,e,n){if("simple"===e&&n&&n.arrow){const{centerOffset:e}=n.arrow,s=b;let i=0,o=0;const r=t.current,a=void 0===r?.x&&void 0===r?.y;a&&(i=Math.round(r.getBoundingClientRect().height),o=Math.round(t.current?.getBoundingClientRect().width));return{isCornerVerticalPlacement:a?Math.abs(e)>=i/2-s/2:["start-top-corner","start-bottom-corner","end-top-corner","end-bottom-corner"].includes(n.origPlacement),isCornerHorizontalPlacement:a?Math.abs(e)>=o/2-s/2:["top-start-corner","top-end-corner","bottom-start-corner","bottom-end-corner"].includes(n.origPlacement)}}return{isCornerVerticalPlacement:!1,isCornerHorizontalPlacement:!1}}(s,i,t);w(function(t,e,n,s,i,o){const r={visibility:"visible"},a={visibility:"visible"};if("simple"===t&&i&&i.arrow){const{x:l,y:c,centerOffset:d}=i.arrow,m=b,g=x,h=y,p=A,C=0===d,S=d>0;function w(t){const e=t?g:m;k({borderTop:`${F(e)} solid ${f.rgba(u.colorSchemeVars.palette.neutral[90],.1)}`,borderRight:j(e),borderLeft:j(e)},r);const n=t?p:h;R({borderTop:`${F(n)} solid ${o}`,borderRight:`${j(n)}`,borderLeft:`${j(n)}`},a)}function k(t,e){Object.assign(e,t)}function R(t,e){Object.assign(e,t)}function v(t){return`rotate(${45*t}deg)`}function F(t){return`${t}px`}function j(t){return`${F(t)} solid transparent`}w(n||s);switch(i.placement.split("-")[0]){case"top":E();break;case"end":e?O():M();break;case"bottom":N();break;case"start":e?M():O()}function E(){null!=l&&(s?(k({top:"",bottom:F(2-m),left:F(l+(S?5:-5)),transform:v(S?5:3)},r),P()):(k({top:"",bottom:F(-m),left:F(C?l:l+(S?1:-1)),transform:v(0)},r),$()))}function M(){null!=c&&(n?(k({top:F(c+(S?2:-2)),right:"",left:F(-m-1),transform:v(S?7:5)},r),P()):(k({top:F(C?c:c+(S?-2:2)),right:"",left:F(1.5*-m),transform:v(2)},r),$()))}function N(){null!=l&&(s?(k({top:F(3-m),bottom:"",left:F(l+(S?4:-4)),transform:v(S?2:6)},r),R({top:F(-h),left:F((S?1:-1)-h)},a)):(k({top:F(-m),bottom:"",left:F(C?l:l+(S?1:-1)),transform:v(4)},r),$()))}function O(){null!=c&&(n?(k({top:F(c+(S?2:-2)),right:F(-m-1),left:"",transform:v(S?1:3)},r),R({top:F(-h),left:F((S?-2:2)-h)},a)):(k({top:F(C?c:c+(S?-2:2)),right:F(1.5*-m),left:"",transform:v(6)},r),$()))}function P(){R({top:F(-h),left:F((S?2:-2)-h)},a)}function $(){R({top:F(-h-2),left:F(-h)},a)}}return{arrowStyle:r,arrowInnerStyle:a}}(i,r,e,n,t,a))}),[t?.placement,t?.x,t?.y,t?.offset,t?.arrow,i,r,s]);const k=n.useMemo((()=>o.mergeRefs(c,C)),[c,C]);return"simple"===i&&e.jsxs("div",{ref:k,class:m.classNames([h,p]),style:S.arrowStyle,children:[" ",e.jsx("div",{class:m.classNames([p]),style:S.arrowInnerStyle})," "]})}));const S=s.forwardRef((({children:t,backgroundColor:s,onClickOutside:l,placement:c="bottom",anchorRef:f,offsetValue:u,class:d,tail:b="none",flipOptions:x={mainAxis:!0,crossAxis:!1},shiftOptions:y={mainAxis:!0,crossAxis:!1},sizeOptions:A={isMaxHeightAdjusted:!1,isMaxWidthAdjusted:!1},boundaryOptions:S={padding:0},onPosition:w},k)=>{const R=n.useRef(null),[v,F]=n.useState(),[j,E]=n.useState(null);n.useLayoutEffect((()=>{E(f.current)}),[]),f.current!==j&&E(f.current);const{direction:M}=a.useUser(),N="rtl"===M,O=n.useCallback((t=>{F(t),w?.(t)}),[c,f,b,w]),P=[i.offset(u),i.b({mainAxis:x.mainAxis,crossAxis:x.crossAxis,fallbackPlacements:x.fallbackPlacements?.map((t=>i.logicalSide(t,M))),padding:S.padding}),i.D({mainAxis:y.mainAxis,crossAxis:y.crossAxis,limiter:i.L({mainAxis:y.mainAxis,crossAxis:y.crossAxis})}),...R.current?[i.m({element:R.current})]:[]];(A.isMaxHeightAdjusted||A.isMaxWidthAdjusted)&&P.push(i.k({apply({availableWidth:t,availableHeight:e,elements:n}){A.isMaxHeightAdjusted&&parseInt(n.floating.style.maxHeight)!==e&&Object.assign(n.floating.style,{maxHeight:`${Math.min(e,A.maxHeightCeiling||e)}px`}),A.isMaxWidthAdjusted&&parseInt(n.floating.style.maxWidth)!==t&&Object.assign(n.floating.style,{maxWidth:`${Math.min(t,A.maxWidthCeiling||t)}px`})},padding:S.padding}));const{x:$,y:H,reference:U,floating:V,refs:T,update:_}=i.useFloating({placement:c,middleware:P,onPosition:O}),[I,W]=n.useState(!1);n.useEffect((()=>{if(T.reference.current&&T.floating.current&&!0===I)return i.N(T.reference.current,T.floating.current,_)}),[T.floating,T.reference,_,I]),n.useEffect((()=>{null!=$&&null!=H&&W(!0)}),[$,H]),r.useOutsideClick({isDisabled:!1,ref:T.floating,handler:l}),n.useLayoutEffect((()=>{if(j instanceof Element){return void U(j)}const t=j,e={getBoundingClientRect:()=>({width:0,height:0,x:t.x,y:t.y,top:t.y,left:t.x,right:t.x,bottom:t.y})};t&&null!=t.x&&U(e)}),[j,U]);const L=n.useMemo((()=>o.mergeRefs(k,V)),[k,V]),z={top:H,left:$};let B={};s&&(B=h.assignInlineVars({[p.floatingVars.backgroundColor]:s}));const D=null==$&&null==H?g.floatingVisibilityStyles.hidden:g.floatingVisibilityStyles.visible,q=m.classNames([d,g.floatingStyle,D]);return e.jsxs("div",{class:q,ref:L,style:{...z,...B},children:[t,e.jsx(C,{ref:R,backgroundColor:s,data:v,anchorRef:f,tail:b,isRtl:N})]})}));t.Floating=S}));
//# sourceMappingURL=Floating-851238a6.js.map
