define(['exports', 'preact/jsx-runtime', './utils/UNSAFE_classNames', './ColorUtils-125727c1', './LayoutUtils-1495460a', './UNSAFE_TagCloud/themes/TagCloudStyles.css', './classNames-c6cc4719', 'preact/hooks', './hooks/UNSAFE_useUser', './PRIVATE_TrackResizeContainer', './hooks/UNSAFE_useTooltip', './utils/UNSAFE_mergeProps', './hooks/UNSAFE_useTranslationBundle', './hooks/PRIVATE_useTextDimensions', './hooks/PRIVATE_useVizSelection', 'css!./TagCloudStyles.styles.css', './index-7d808afa', 'preact', './Common', './Common/themes', './Common/themes/redwood/theme', './Common/themes/themeContract.css', 'preact/compat', './hooks/PRIVATE_useSize', './hooks/PRIVATE_useResizeObserver', './hooks/UNSAFE_useId', './UNSAFE_Floating', './Floating-851238a6', './index-0f1e12db', './utils/PRIVATE_floatingUtils', './utils/PRIVATE_refUtils', './hooks/UNSAFE_useOutsideClick', './utils/UNSAFE_arrayUtils', './hooks/UNSAFE_useComponentTheme', './utils/UNSAFE_logger', './_curry1-5cea534a', './_curry2-c02a6898', './utils-3096e431', './UNSAFE_Floating/themes/redwood/FloatingTheme', './UNSAFE_Floating/themes/FloatingStyles.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingBaseTheme.css', 'module', './UNSAFE_Floating/themes/redwood/FloatingVariants.css', './vanilla-extract-recipes-createRuntimeFn.esm-6f6e2b8d', './vanilla-extract-dynamic.esm-a9754e48', './UNSAFE_Floating/themes/FloatingContract.css', './UNSAFE_Layer', './useThemeInterpolations-710109a5', './hooks/UNSAFE_useColorScheme', './hooks/UNSAFE_useScale', './utils/UNSAFE_interpolations/theme', './UNSAFE_Theme', './utils/UNSAFE_mergeInterpolations', './_curry3-f55dd1d6', './_has-de06828b', './hooks/UNSAFE_useHover', './hooks/UNSAFE_useToggle', './hooks/UNSAFE_useFocus', './hooks/UNSAFE_useTouch', './hooks/UNSAFE_useAnimation', './useAnimation-36a9a58b', './hooks/UNSAFE_useThemeInterpolations', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './hooks/UNSAFE_useTooltip/themes/TooltipContentStyles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentBaseTheme.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', 'module', './utils/PRIVATE_clientHints', './clientHints-fbfc14a7'], (function(e,t,o,n,s,i,r,l,a,c,u,d,h,f,m,g,S,p,x,I,F,A,y,_,C,U,T,b,E,w,N,v,k,R,z,M,P,V,L,$,D,B,j,H,O,K,X,q,G,J,Q,W,Y,Z,ee,te,oe,ne,se,ie,re,le,ae,ce,ue,de,he,fe,me,ge,Se,pe){"use strict";const xe=.35,Ie=.65,Fe=20,Ae=(e,t,o,n)=>t===o?12:12+Math.ceil((n-1)*(e-t)/(o-t)*12);function ye(e){const t=[];let o=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let t=0;t<e.length;t++)o=Math.min(o,e[t].value),n=Math.max(n,e[t].value);for(let s=0;s<e.length;s++){const i=Ae(e[s].value,o,n,3);t.push({...e[s],fontSize:i})}return t}function _e(e,t){const o=[0];let n=e[0].w+2;if(e.length>1)for(let s=1;s<e.length;s++)n+e[s].w>t&&(o.push(s),n=0),n+=e[s].w+2;return o}function Ce(e,t,o,n,i,r){let l;return l="cloud"!==e&&e?function(e,t,o,n,s){const i=[],r=[];let l=0,a=0,c=0;const u=ye(e);for(let e=0;e<u.length;e++){const t=u[e],o=s(t.label,{fontSize:t.fontSize+"px"});l=Math.max(l,o.width),a=Math.max(a,o.height),c=Math.max(c,t.fontSize),r.push({w:o.width,h:o.height})}let d,h,f=0,m=(t-0)/l;for(;m-f>.001;)d=(f+m)/2,h=_e(r,(t-0)/d),h.length*(d*a+2)-2>o-0?m=d:f=d;d=f,h=_e(r,(t-0)/d),h.push(u.length);for(let e=0;e<h.length-1;e++){const o=h[e],l=h[e+1];let c=5,f=0,m=!0;if(l-o>1){let n=0;for(let e=o;e<l;e++)n+=r[e].w*d,f=Math.max(f,r[e].h*d);if(c=(t-0-n)/(l-o-1),e==h.length-2){const e=.5*f;e<c&&n+(l-o)*e<.9*(t-0)&&(c=e,m=!1)}}const g=0+(e+1)*(a*d+2)-2;let S=0;for(let e=o;e<l;e++){const a=u[e],h=a.fontSize*d;a.fontSize=h;const f=s(a.label,{fontSize:a.fontSize+"px"});a.y=0+g+f.y-Fe,m&&e===l-1&&e!==o?a.x=n?0+f.width+0-t:0+t-f.width-0:(a.x=0+S,n?S-=r[e].w*d+c:S+=r[e].w*d+c),i.push({...a,w:f.width,h:f.height})}}return i}(t,o,n,i,r):function(e,t,o,n,i){const r=[],l=180;let a=10/l,c=10/l;t>o?a*=t/o:c*=o/t;const u=2*Math.PI/l;let d=null,h=0;const f=[],m=[],g=[],S=ye(e);for(let e=0;e<S.length;e++){let t=!1,o=0,n=4;const g=S[e],p=i(g.label,{fontSize:g.fontSize+"px"});h=Math.max(h,g.fontSize);let x=-1;for(;!t;){const i=o%l;void 0===f[i]&&(f[i]=Math.cos(o*u)),void 0===m[i]&&(m[i]=Math.sin(o*u));const h=a*o*f[i],S=c*o*m[i],I={x:h,y:S,w:p.width,h:p.height};if(t=!0,-1!==x&&s.intersects(r[x],I)&&(t=!1),t)for(let o=0;o<e;o++)if(s.intersects(r[o],I)){x=o,t=!1;break}t&&(d=d?s.getUnion(d,I):I,x=-1,r[e]=I,g.x=h,g.y=S,g.w=p.width,g.h=p.height),3600==o?n=3:5400==o?n=2:10800==o&&(n=1),o+=n}}if(d){const e=Math.max(d.w/t,d.h/o),s=d.x+d.w/2,i=d.y+d.h/2;for(let r=0;r<S.length;r++){let l;const a=S[r];l=n?null!=a.x?0-a.x/e-(t/2-s/e):0:null!=a.x?0+a.x/e+(t/2-s/e):0;const c=null!=a.y?0+a.y/e+(o/2-i/e):0,u=null!=a.w?a.w/e:0,d=null!=a.h?a.h/e:0,h=a.fontSize/e;g.push({...a,x:l,y:c,fontSize:h,w:u,h:d})}}return g}(t,o,n,i,r),l}function Ue(e,t,o,s,i,r,l,a,c){let u,d=!1;if(!s){const e=t===l?.idx,o=t===i?.idx;d=!!(e&&l?.isCurrent||o&&i?.isCurrent)}const h=function(e,t){if(t)return 0===t.length||new Set(t).has(e)}(e.id,a),f=function(e,t){return!(!t||0===t.length)&&new Set(t).has(e)}(e.id,r);if(e.color){let t,s,i;f?(s=e.color,t=n.getContrastingTextColor(n._lightenColor(s,d?Ie:1)),i=d?`linear-gradient(rgba(255,255,255, ${1-Ie}), rgba(255,255,255, ${1-Ie}))`:"none"):d&&o?(s=e.color,i=`linear-gradient(rgba(255,255,255, ${1-xe}), rgba(255,255,255, ${1-xe}))`,t=n.getContrastingTextColor(n._lightenColor(s,d?xe:1))):t=e.color,u={color:t,backgroundColor:s,backgroundImage:i}}else o||(u={backgroundColor:"none"});return{isCurrent:d,isHighlighted:h,isSelected:f,isFocused:!!l&&Ee(l,t),key:e.id,itemIdx:t,style:u,activeId:d?c:void 0,isReadOnly:s,...e}}function Te(e){const t=e.dataset.idx;if(null!=t)return{idx:Number(t)}}function be(e,t){return e?.idx===t?.idx}function Ee(e,t){if(!e.isFocusVisible)return!1;const{idx:o}=e;return o===t}const we=e=>{const{itemBase:o,itemStyle:n,hoverUnselectedItemStyle:s,selectedItemStyle:l,hoveredSelectedItemStyle:a,dimmedItemStyle:c,interactiveCursorStyle:u}=i.styles,d=e.isHighlighted||null==e.isHighlighted,h=r.classNames([o,e.isSelected?l:n,e.isCurrent?e.isSelected?a:e.isFocused||e.supportsSelection?s:"":"",d?"":c,e.supportsAction||e.supportsSelection?u:""]),f=(m=!!e.supportsSelection,g=e.translations,S=e.isSelected,{"aria-label":`${e.accessibleLabel||""}. ${m?S?g?.dataVisualization_stateSelected():g?.dataVisualization_stateUnselected():""}`,role:"img"});var m,g,S;return t.jsx("div",{class:h,"data-id":`${e.id}`,"data-idx":e.itemIdx,style:{...e.style,transform:`translate(${e.x}px,${e.y}px)`,fontSize:e.fontSize},id:e.activeId,...f,children:e.label})};function Ne(e,t){const{idx:o}=e;return t[o]}function ve(e){return{getItem:t=>Ne(t,e),getDetailFromInfo:t=>{if(!t)return{id:void 0};return{id:Ne(t,e).id}},getPrevItemInfo:t=>function(e,t){let o=e.idx;return o=Math.max(0,o-1),{idx:o,id:t[o].id}}(t,e),getNextItemInfo:t=>function(e,t){let o=e.idx;return o=Math.min(t.length-1,o+1),{idx:o,id:t[o].id}}(t,e)}}const ke=(e,t,o,n)=>{let s=0,i=8;if(n?.current&&t.isCurrent&&e.current&&null!=n?.current.x&&null!=n?.current.w&&null!=n?.current.y&&null!=n?.current.h){const t=e.current.getBoundingClientRect();s=(o?-1:1)*n.current.x+n.current.w/2-t.width/2,i+=-1*n.current.y}return{crossAxis:s,mainAxis:i}},Re=({text:e,rootRef:t,focusedItemRef:o,focusedItemInfo:n})=>{const{direction:s}=a.useUser(),i="rtl"===s,[r,c]=l.useState(ke(t,n,i,o)),[d,h]=l.useState(!1);l.useLayoutEffect((()=>{c(ke(t,n,i,o))}),[n]);const f=n?.isCurrent?"element":"pointer",{tooltipContent:m,tooltipProps:g}=u.useTooltipControlled({text:e,position:"top",isDisabled:!1,variant:"datatip",anchor:{x:f,y:f},offset:r,isOpen:d,onToggle:({value:e})=>h(e)});return{datatipContent:m,datatipProps:g}};e.TagCloud=function({items:e,onItemAction:o,onItemInput:n,...r}){const u=l.useRef(null),g=l.useRef(null),S=h.useTranslationBundle("@oracle/oraclejet-preact"),p=e.filter((e=>!r.hiddenIds?.includes(e.id))),x=p&&0!==p.length,I=!(!r.selectionMode||"none"===r.selectionMode),F=null!=o,A=F&&null===n,y=function(e,t,o){return{"aria-label":`${o||""} ${t?"":e.dataVisualization_noData()}`,role:"application"}}(S,x,r.accessibleLabel),{getItem:_,getDetailFromInfo:C,getPrevItemInfo:U,getNextItemInfo:T}=ve(p),{hoveredItemInfo:b,focusedItemInfo:E,...w}=function(e,t,o,n,i,r){const[c,u]=l.useState({idx:0}),[d,h]=l.useState(),f=l.useRef(),{direction:m}=a.useUser(),g="rtl"===m,S=o=>{const n=Te(o.target);be(n,d)||(h(n&&{...n,isCurrent:!0}),f.current=s.getRandomId(),e&&(u({...c,isCurrent:!1}),r?.(t(n))))},p=()=>{h(void 0),f.current=void 0,e&&r?.(t())};if(!e)return{focusedItemInfo:c,hoveredItemInfo:d,onPointerLeave:p,onPointerMove:S};function x(e){r?.(t(e)),f.current=s.getRandomId(),u(e)}function I(e){be(e,c)||(e.isCurrent=!0,e.isFocusVisible=!0,d&&h({...d,isCurrent:!1}),x(e))}const F=()=>{const{id:e}=t(c);null!=e&&(i?.({id:e}),f.current=s.getRandomId())};return{focusedItemInfo:c,hoveredItemInfo:d,"aria-activedescendant":f.current,onPointerUp:e=>{const o=Te(e.target);if(null!=o){u(o);const{id:e}=t(o);null!=e&&(i?.({id:e}),f.current=s.getRandomId())}else i?.({id:void 0})},onPointerMove:S,onKeyUp:e=>{switch(e.code){case"Space":case"Enter":F();break;case"Tab":x({...c,isCurrent:!0,isFocusVisible:!0})}},onKeyDown:e=>{switch(e.key){case"Tab":return;case"ArrowDown":I(n(c));break;case"ArrowUp":I(o(c));break;case"ArrowRight":I(g?o(c):n(c));break;case"ArrowLeft":I(g?n(c):o(c))}(e=>{e.preventDefault(),e.stopPropagation()})(e)},onPointerLeave:p,onBlur:()=>{(null!=d||c.isCurrent)&&r?.(t(void 0));const e={...c,isCurrent:!1,isFocusVisible:!1};u(e)}}}(!A&&x,C,U,T,o,n),N=function(e,t,o,n,s){if(s)return s;const i=n?.isCurrent;return i&&null!=n.idx?t(n,e)?.accessibleLabel:o&&o.isCurrent?t(o,e)?.accessibleLabel:void 0}(p,_,E,b,r.datatip),{datatipContent:v,datatipProps:k}=Re({text:N,rootRef:u,focusedItemInfo:E,focusedItemRef:g}),R=m.useSelection({idExtracter:e=>{const t="keyup"===e.type?E:Te(e.target);return C(t).id},selection:r.selectedIds,selectionMode:r.selectionMode,onChange:r.onSelectionChange}),z=d.mergeProps(w,k,R),{direction:M}=a.useUser();return t.jsx(c.TrackResizeContainer,{width:r.width,height:r.height,children:(e,o)=>{const{textMeasureContent:n,getTextDimensions:s}=f.useTextDimensions(),[a,c]=l.useState([]);return l.useLayoutEffect((()=>{s&&x&&c(Ce(r.layout,p,e,o,"rtl"===M,s))}),[r.layout,p,e,o,M,s]),t.jsxs("div",{ref:u,tabIndex:A?void 0:0,style:{width:e,height:o},class:i.baseStyles,...y,...z,children:[a.map(((e,o)=>{const n=Ue(e,o,I,A,b,r.selectedIds,E,r.highlightedIds,w["aria-activedescendant"]);return E.idx===o&&(g.current=e),t.jsx(we,{fontSize:e.fontSize,x:e.x,y:e.y,accessibleLabel:e.accessibleLabel,supportsSelection:I,supportsAction:F,translations:S,...n})})),n,v]})}})},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_TagCloud.js.map
